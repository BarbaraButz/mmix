macro_rules! mod_def_reexport {
    ( $( $instr:ident, )* ) => (
        $(
            mod $instr;
            pub use self::$instr::$instr;
        )*
    )
}


pub mod arithmetic;
pub mod bitwise;
pub mod bytewise;
pub mod conditional;
pub mod control;
pub mod float;
pub mod immediate;
pub mod interrupt;
pub mod memory;
pub mod other;
pub mod subroutine;
pub mod system;

use machine::state::State;

pub fn get_semantics(opcode: u8) -> Semantic {
    SEMANTICS[opcode as usize]
}

pub fn get_symbolics(opcode: u8) -> &'static str {
    SYMBOLICS[opcode as usize]
}

type Semantic = fn(&mut State, u8, u8, u8);

const SEMANTICS: [Semantic; 256] = [
    interrupt::trap,
    float::fcmp,
    float::fun,
    float::feql,
    float::fadd,
    float::fix,
    float::fsub,
    float::fixu,
    float::flot,
    float::floti,
    float::flotu,
    float::flotui,
    float::sflot,
    float::sfloti,
    float::sflotu,
    float::sflotui,
    float::fmul,
    float::fcmpe,
    float::fune,
    float::feqle,
    float::fdiv,
    float::fsqrt,
    float::frem,
    float::fint,
    arithmetic::mul,
    arithmetic::muli,
    arithmetic::mulu,
    arithmetic::mului,
    arithmetic::div,
    arithmetic::divi,
    arithmetic::divu,
    arithmetic::divui,
    arithmetic::add,
    arithmetic::addi,
    arithmetic::addu,
    arithmetic::addui,
    arithmetic::sub,
    arithmetic::subi,
    arithmetic::subu,
    arithmetic::subui,
    arithmetic::addu2,
    arithmetic::addu2i,
    arithmetic::addu4,
    arithmetic::addu4i,
    arithmetic::addu8,
    arithmetic::addu8i,
    arithmetic::addu16,
    arithmetic::addu16i,
    arithmetic::cmp,
    arithmetic::cmpi,
    arithmetic::cmpu,
    arithmetic::cmpui,
    arithmetic::neg,
    arithmetic::negi,
    arithmetic::negu,
    arithmetic::negui,
    arithmetic::sl,
    arithmetic::sli,
    arithmetic::slu,
    arithmetic::slui,
    arithmetic::sr,
    arithmetic::sri,
    arithmetic::sru,
    arithmetic::srui,
    control::bn,
    control::bnb,
    control::bz,
    control::bzb,
    control::bp,
    control::bpb,
    control::bod,
    control::bodb,
    control::bnn,
    control::bnnb,
    control::bnz,
    control::bnzb,
    control::bnp,
    control::bnpb,
    control::bev,
    control::bevb,
    control::pbn,
    control::pbnb,
    control::pbz,
    control::pbzb,
    control::pbp,
    control::pbpb,
    control::pbod,
    control::pbodb,
    control::pbnn,
    control::pbnnb,
    control::pbnz,
    control::pbnzb,
    control::pbnp,
    control::pbnpb,
    control::pbev,
    control::pbevb,
    conditional::csn,
    conditional::csni,
    conditional::csz,
    conditional::cszi,
    conditional::csp,
    conditional::cspi,
    conditional::csod,
    conditional::csodi,
    conditional::csnn,
    conditional::csnni,
    conditional::csnz,
    conditional::csnzi,
    conditional::csnp,
    conditional::csnpi,
    conditional::csev,
    conditional::csevi,
    conditional::zsn,
    conditional::zsni,
    conditional::zsz,
    conditional::zszi,
    conditional::zsp,
    conditional::zspi,
    conditional::zsod,
    conditional::zsodi,
    conditional::zsnn,
    conditional::zsnni,
    conditional::zsnz,
    conditional::zsnzi,
    conditional::zsnp,
    conditional::zsnpi,
    conditional::zsev,
    conditional::zsevi,
    memory::ldb,
    memory::ldbi,
    memory::ldbu,
    memory::ldbui,
    memory::ldw,
    memory::ldwi,
    memory::ldwu,
    memory::ldwui,
    memory::ldt,
    memory::ldti,
    memory::ldtu,
    memory::ldtui,
    memory::ldo,
    memory::ldoi,
    memory::ldou,
    memory::ldoui,
    float::ldsf,
    float::ldsfi,
    memory::ldht,
    memory::ldhti,
    system::cswap,
    system::cswapi,
    system::ldunc,
    system::ldunci,
    system::ldvts,
    system::ldvtsi,
    system::preld,
    system::preldi,
    system::prego,
    system::pregoi,
    control::go,
    control::goi,
    memory::stb,
    memory::stbi,
    memory::stbu,
    memory::stbui,
    memory::stw,
    memory::stwi,
    memory::stwu,
    memory::stwui,
    memory::stt,
    memory::stti,
    memory::sttu,
    memory::sttui,
    memory::sto,
    memory::stoi,
    memory::stou,
    memory::stoui,
    float::stsf,
    float::stsfi,
    memory::stht,
    memory::sthti,
    memory::stco,
    memory::stcoi,
    system::stunc,
    system::stunci,
    system::syncd,
    system::syncdi,
    system::prest,
    system::presti,
    system::syncid,
    system::syncidi,
    subroutine::pushgo,
    subroutine::pushgoi,
    bitwise::or,
    bitwise::ori,
    bitwise::orn,
    bitwise::orni,
    bitwise::nor,
    bitwise::nori,
    bitwise::xor,
    bitwise::xori,
    bitwise::and,
    bitwise::andi,
    bitwise::andn,
    bitwise::andni,
    bitwise::nand,
    bitwise::nandi,
    bitwise::nxor,
    bitwise::nxori,
    bytewise::bdif,
    bytewise::bdifi,
    bytewise::wdif,
    bytewise::wdifi,
    bytewise::tdif,
    bytewise::tdifi,
    bytewise::odif,
    bytewise::odifi,
    bitwise::mux,
    bitwise::muxi,
    bitwise::sadd,
    bitwise::saddi,
    bytewise::mor,
    bytewise::mori,
    bytewise::mxor,
    bytewise::mxori,
    immediate::seth,
    immediate::setmh,
    immediate::setml,
    immediate::setl,
    immediate::inch,
    immediate::incmh,
    immediate::incml,
    immediate::incl,
    immediate::orh,
    immediate::ormh,
    immediate::orml,
    immediate::orl,
    immediate::andnh,
    immediate::andnmh,
    immediate::andnml,
    immediate::andnl,
    control::jmp,
    control::jmpb,
    subroutine::pushj,
    subroutine::pushjb,
    other::geta,
    other::getab,
    other::put,
    other::puti,
    subroutine::pop,
    interrupt::resume,
    subroutine::save,
    subroutine::unsave,
    system::sync,
    other::swym,
    other::get,
    interrupt::trip,
];

const SYMBOLICS: [&'static str; 256] = [
    "TRAP",
    "FCMP",
    "FUN",
    "FEQL",
    "FADD",
    "FIX",
    "FSUB",
    "FIXU",
    "FLOT",
    "FLOTI",
    "FLOTU",
    "FLOTUI",
    "SFLOT",
    "SFLOTI",
    "SFLOTU",
    "SFLOTUI",
    "FMUL",
    "FCMPE",
    "FUNE",
    "FEQLE",
    "FDIV",
    "FSQRT",
    "FREM",
    "FINT",
    "MUL",
    "MULI",
    "MULU",
    "MULUI",
    "DIV",
    "DIVI",
    "DIVU",
    "DIVUI",
    "ADD",
    "ADDI",
    "ADDU",
    "ADDUI",
    "SUB",
    "SUBI",
    "SUBU",
    "SUBUI",
    "2ADDU",
    "2ADDUI",
    "4ADDU",
    "4ADDUI",
    "8ADDU",
    "8ADDUI",
    "16ADDU",
    "16ADDUI",
    "CMP",
    "CMPI",
    "CMPU",
    "CMPUI",
    "NEG",
    "NEGI",
    "NEGU",
    "NEGUI",
    "SL",
    "SLI",
    "SLU",
    "SLUI",
    "SR",
    "SRI",
    "SRU",
    "SRUI",
    "BN",
    "BNB",
    "BZ",
    "BZB",
    "BP",
    "BPB",
    "BOD",
    "BODB",
    "BNN",
    "BNNB",
    "BNZ",
    "BNZB",
    "BNP",
    "BNPB",
    "BEV",
    "BEVB",
    "PBN",
    "PBNB",
    "PBZ",
    "PBZB",
    "PBP",
    "PBPB",
    "PBOD",
    "PBODB",
    "PBNN",
    "PBNNB",
    "PBNZ",
    "PBNZB",
    "PBNP",
    "PBNPB",
    "PBEV",
    "PBEVB",
    "CSN",
    "CSNI",
    "CSZ",
    "CSZI",
    "CSP",
    "CSPI",
    "CSOD",
    "CSODI",
    "CSNN",
    "CSNNI",
    "CSNZ",
    "CSNZI",
    "CSNP",
    "CSNPI",
    "CSEV",
    "CSEVI",
    "ZSN",
    "ZSNI",
    "ZSZ",
    "ZSZI",
    "ZSP",
    "ZSPI",
    "ZSOD",
    "ZSODI",
    "ZSNN",
    "ZSNNI",
    "ZSNZ",
    "ZSNZI",
    "ZSNP",
    "ZSNPI",
    "ZSEV",
    "ZSEVI",
    "LDB",
    "LDBI",
    "LDBU",
    "LDBUI",
    "LDW",
    "LDWI",
    "LDWU",
    "LDWUI",
    "LDT",
    "LDTI",
    "LDTU",
    "LDTUI",
    "LDO",
    "LDOI",
    "LDOU",
    "LDOUI",
    "LDSF",
    "LDSFI",
    "LDHT",
    "LDHTI",
    "CSWAP",
    "CSWAPI",
    "LDUNC",
    "LDUNCI",
    "LDVTS",
    "LDVTSI",
    "PRELD",
    "PRELDI",
    "PREGO",
    "PREGOI",
    "GO",
    "GOI",
    "STB",
    "STBI",
    "STBU",
    "STBUI",
    "STW",
    "STWI",
    "STWU",
    "STWUI",
    "STT",
    "STTI",
    "STTU",
    "STTUI",
    "STO",
    "STOI",
    "STOU",
    "STOUI",
    "STSF",
    "STSFI",
    "STHT",
    "STHTI",
    "STCO",
    "STCOI",
    "STUNC",
    "STUNCI",
    "SYNCD",
    "SYNCDI",
    "PREST",
    "PRESTI",
    "SYNCID",
    "SYNCIDI",
    "PUSHGO",
    "PUSHGOI",
    "OR",
    "ORI",
    "ORN",
    "ORNI",
    "NOR",
    "NORI",
    "XOR",
    "XORI",
    "AND",
    "ANDI",
    "ANDN",
    "ANDNI",
    "NAND",
    "NANDI",
    "NXOR",
    "NXORI",
    "BDIF",
    "BDIFI",
    "WDIF",
    "WDIFI",
    "TDIF",
    "TDIFI",
    "ODIF",
    "ODIFI",
    "MUX",
    "MUXI",
    "SADD",
    "SADDI",
    "MOR",
    "MORI",
    "MXOR",
    "MXORI",
    "SETH",
    "SETMH",
    "SETML",
    "SETL",
    "INCH",
    "INCMH",
    "INCML",
    "INCL",
    "ORH",
    "ORMH",
    "ORML",
    "ORL",
    "ANDNH",
    "ANDNMH",
    "ANDNML",
    "ANDNL",
    "JMP",
    "JMPB",
    "PUSHJ",
    "PUSHJB",
    "GETA",
    "GETAB",
    "PUT",
    "PUTI",
    "POP",
    "RESUME",
    "SAVE",
    "UNSAVE",
    "SYNC",
    "SWYM",
    "GET",
    "TRIP",
];
